<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Крестики-нолики PRO</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root {
  --bg: linear-gradient(135deg, #141e30, #243b55);
  --board-bg: rgba(255,255,255,0.05);
  --cell-bg: rgba(255,255,255,0.1);
  --cell-hover: rgba(255,255,255,0.25);
  --text: white;
  --accent: #00f5ff;
}

body {
  margin: 0;
  font-family: 'Segoe UI', sans-serif;
  background: var(--bg);
  color: var(--text);
  text-align: center;
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  align-items: center;
}

h1 {
  margin-top: 20px;
  font-size: 28px;
}

.controls {
  margin: 15px;
}

select, button {
  padding: 8px 14px;
  margin: 5px;
  border-radius: 10px;
  border: none;
  font-size: 14px;
  cursor: pointer;
}

#board-container {
  background: var(--board-bg);
  padding: 15px;
  border-radius: 20px;
  box-shadow: 0 0 25px rgba(0,0,0,0.4);
}

#board {
  display: grid;
  grid-template-columns: repeat(3, 110px);
  gap: 10px;
}

.cell {
  width: 110px;
  height: 110px;
  font-size: 48px;
  background: var(--cell-bg);
  border-radius: 15px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: 0.2s;
  backdrop-filter: blur(5px);
}

.cell:hover {
  background: var(--cell-hover);
  transform: scale(1.05);
}

.winner {
  animation: glow 1s infinite alternate;
}

@keyframes glow {
  from { box-shadow: 0 0 10px var(--accent); }
  to { box-shadow: 0 0 25px var(--accent); }
}

/* ===== ТЕМЫ ===== */

.theme-light {
  --bg: linear-gradient(135deg, #f6f9fc, #dde7f0);
  --board-bg: white;
  --cell-bg: #f0f0f0;
  --cell-hover: #ddd;
  --text: #222;
  --accent: #0077ff;
}

.theme-neon {
  --bg: black;
  --board-bg: rgba(0,255,255,0.1);
  --cell-bg: rgba(0,255,255,0.15);
  --cell-hover: rgba(0,255,255,0.4);
  --text: #00ffff;
  --accent: #00ffff;
}

.theme-fire {
  --bg: linear-gradient(135deg, #200000, #8b0000, #ff4500);
  --board-bg: rgba(255,100,0,0.2);
  --cell-bg: rgba(255,150,0,0.3);
  --cell-hover: rgba(255,200,0,0.5);
  --text: #fff5e6;
  --accent: yellow;
}

#status {
  margin: 15px;
  font-size: 18px;
}

@media (max-width: 500px) {
  #board {
    grid-template-columns: repeat(3, 85px);
  }
  .cell {
    width: 85px;
    height: 85px;
    font-size: 36px;
  }
}
</style>
</head>
<body>

<h1>Крестики-нолики PRO</h1>

<div class="controls">
  Тема:
  <select id="theme">
    <option value="">Тёмная</option>
    <option value="theme-light">Светлая</option>
    <option value="theme-neon">Неон</option>
    <option value="theme-fire">Огненная</option>
  </select>

  <button onclick="restart()">Новая игра</button>
</div>

<h2 id="status">Твой ход (X)</h2>

<div id="board-container">
  <div id="board"></div>
</div>

<script>
const boardEl = document.getElementById("board");
const statusEl = document.getElementById("status");
const themeSelect = document.getElementById("theme");

let board = Array(9).fill("");
let gameOver = false;

function drawBoard() {
  boardEl.innerHTML = "";
  board.forEach((cell,i)=>{
    const div=document.createElement("div");
    div.className="cell";
    div.innerText=cell;
    div.onclick=()=>move(i);
    boardEl.appendChild(div);
  });
}

function move(i){
  if(board[i]||gameOver) return;
  board[i]="X";
  drawBoard();

  if(checkWinner("X")) return endGame("Ты победил!", "X");
  if(isDraw()) return endGame("Ничья!");

  setTimeout(aiMove,300);
}

function aiMove(){
  let empty=board.map((v,i)=>v===""?i:null).filter(v=>v!==null);
  let move=empty[Math.floor(Math.random()*empty.length)];
  board[move]="O";
  drawBoard();

  if(checkWinner("O")) return endGame("ИИ победил!", "O");
  if(isDraw()) return endGame("Ничья!");

  statusEl.innerText="Твой ход (X)";
}

function checkWinner(p){
  const wins=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];
  for(let combo of wins){
    if(combo.every(i=>board[i]===p)){
      highlight(combo);
      return true;
    }
  }
  return false;
}

function highlight(combo){
  const cells=document.querySelectorAll(".cell");
  combo.forEach(i=>cells[i].classList.add("winner"));
}

function isDraw(){
  return board.every(c=>c);
}

function endGame(msg){
  statusEl.innerText=msg;
  gameOver=true;
}

function restart(){
  board=Array(9).fill("");
  gameOver=false;
  statusEl.innerText="Твой ход (X)";
  drawBoard();
}

themeSelect.onchange=()=>{
  document.body.className=themeSelect.value;
};

drawBoard();
</script>

</body>
</html>
